{"version":3,"sources":["pages/novel/modify/index.js"],"names":["Modify","_this","this","_this$props","props","page_title","title","image_url","handleInputChange","handleChange","handleSubmit","uploadProps","action","onChange","showUploadList","name","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","antd__WEBPACK_IMPORTED_MODULE_7__","labelCol","sm","span","wrapperCol","Item","label","antd__WEBPACK_IMPORTED_MODULE_8__","value","placeholder","antd__WEBPACK_IMPORTED_MODULE_9__","antd__WEBPACK_IMPORTED_MODULE_10__","antd__WEBPACK_IMPORTED_MODULE_11__","type","style","width","src","alt","marginLeft","marginRight","onClick","history","goBack","record","decodeURI","location","search","JSON","parse","split","getNovelInfo","PureComponent","connect","state","novel","_id","dispatch","novelInfo","actionCreators","e","target","res","file","status","api","response","withRouter"],"mappings":"2OAOMA,mLACK,IAAAC,EAAAC,KAAAC,EACiFD,KAAKE,MAArFC,EADDF,EACCE,WAAYC,EADbH,EACaG,MAAOC,EADpBJ,EACoBI,UAAWC,EAD/BL,EAC+BK,kBAAmBC,EADlDN,EACkDM,aAAcC,EADhEP,EACgEO,aASjEC,EAAc,CAClBC,OAAQ,iCACRC,SAAUJ,EACVK,gBAAgB,EAChBC,KAAM,aAER,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAACE,EAAA,EAhBgB,CACnBC,SAAU,CACRC,GAAI,CAACC,KAAM,IAEbC,WAAY,CACVF,GAAI,CAACC,KAAM,KAYTP,EAAAC,EAAAC,cAACE,EAAA,EAAKK,KAAN,CAAWC,MAAM,4BACfV,EAAAC,EAAAC,cAAA,UAAKZ,IAEPU,EAAAC,EAAAC,cAACE,EAAA,EAAKK,KAAN,CAAWC,MAAM,4BACfV,EAAAC,EAAAC,cAACS,EAAA,EAAD,CAAOC,MAAOvB,EAAYwB,YAAY,6CAAUhB,SAAUL,KAE5DQ,EAAAC,EAAAC,cAACE,EAAA,EAAKK,KAAN,CAAWC,MAAM,gBACfV,EAAAC,EAAAC,cAACY,EAAA,EAAWnB,EACK,KAAdJ,EACIS,EAAAC,EAAAC,cAACa,EAAA,EAAD,KAAQf,EAAAC,EAAAC,cAACc,EAAA,EAAD,CAAMC,KAAK,WAAnB,4BACAjB,EAAAC,EAAAC,cAAA,OAAKgB,MAAO,CAACC,MAAO,SAAUC,IAAK7B,EAAW8B,IAAI,OAG3DrB,EAAAC,EAAAC,cAACE,EAAA,EAAKK,KAAN,CAAWS,MAAO,CAACI,WAAY,UAC7BtB,EAAAC,EAAAC,cAACa,EAAA,EAAD,CAAQG,MAAO,CAACK,YAAa,QAASN,KAAK,UAAUO,QAAS,WAAO9B,EAAaT,EAAKG,SAAvF,gBACAY,EAAAC,EAAAC,cAACa,EAAA,EAAD,CAAQE,KAAK,SAASO,QAAS,kBAAMvC,EAAKG,MAAMqC,QAAQC,WAAxD,+DAOR,IAAIC,EAASC,UAAU1C,KAAKE,MAAMyC,SAASC,QAC3CH,EAASI,KAAKC,MAAML,EAAOM,MAAM,KAAK,IACtC/C,KAAKE,MAAM8C,aAAaP,UA5CPQ,iBA0ENC,sBA1BE,SAACC,GAAD,MAAY,CAC3BhD,WAAYgD,EAAMC,MAAMjD,WACxBE,UAAW8C,EAAMC,MAAM/C,UACvBD,MAAO+C,EAAMC,MAAMhD,MACnBiD,IAAKF,EAAMC,MAAMC,MAGC,SAACC,GAAD,MAAe,CACjCN,aADiC,SACpBO,GACXD,EAASE,IAAeR,aAAaO,KAEvCjD,kBAJiC,SAIfmD,GAChB,IAAItD,EAAasD,EAAEC,OAAOhC,MAC1B4B,EAASE,IAAelD,kBAAkBH,KAE5CI,aARiC,SAQpBoD,GACX,GAAuB,SAApBA,EAAIC,KAAKC,OAAmB,CAC7B,IAAIxD,EAAYyD,IAAM,YAAcH,EAAIC,KAAKG,SAAS1D,UACtDiD,EAASE,IAAejD,aAAaF,MAGzCG,aAdiC,SAcpBN,GACXoD,EAASE,IAAehD,aAAaN,OAI1BgD,CAA+Bc,YAAWlE","file":"static/js/10.1803a608.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Form, Input, Upload, Button, Icon } from 'antd';\r\nimport { actionCreators } from '../store';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { api } from '../../../api/config';\r\n\r\nclass Modify extends PureComponent {\r\n  render() {\r\n    const { page_title, title, image_url, handleInputChange, handleChange, handleSubmit } = this.props;\r\n    const FormLabelCol = {\r\n      labelCol: {\r\n        sm: {span: 3},\r\n      },\r\n      wrapperCol: {\r\n        sm: {span: 8},\r\n      }\r\n    };\r\n    const uploadProps = {\r\n      action: 'http://h.tyuss.com/book/upload',\r\n      onChange: handleChange,\r\n      showUploadList: false,\r\n      name: 'imageFile'\r\n    };\r\n    return (\r\n      <div className='modify'>\r\n        <Form {...FormLabelCol}>\r\n          <Form.Item label='小说名称'>\r\n            <h3>{title}</h3>\r\n          </Form.Item>\r\n          <Form.Item label='页面标题'>\r\n            <Input value={page_title} placeholder='请输入页面标题' onChange={handleInputChange}/>\r\n          </Form.Item>\r\n          <Form.Item label='banner图'>\r\n            <Upload {...uploadProps}>\r\n              {image_url === ''\r\n                ? (<Button><Icon type=\"upload\" />上传图片</Button>)\r\n                : (<img style={{width: '200px'}} src={image_url} alt=\"\"/>)}\r\n            </Upload>\r\n          </Form.Item>\r\n          <Form.Item style={{marginLeft: '100px'}}>\r\n            <Button style={{marginRight: '20px'}} type='primary' onClick={() => {handleSubmit(this.props)}}>提交</Button>\r\n            <Button type='danger' onClick={() => this.props.history.goBack()}>取消</Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    )\r\n  }\r\n  componentDidMount() {\r\n    let record = decodeURI(this.props.location.search);\r\n    record = JSON.parse(record.split('=')[1]);\r\n    this.props.getNovelInfo(record);\r\n  }\r\n}\r\n\r\nconst mapState = (state) => ({\r\n  page_title: state.novel.page_title,\r\n  image_url: state.novel.image_url,\r\n  title: state.novel.title,\r\n  _id: state.novel._id\r\n});\r\n\r\nconst mapDispatch = (dispatch) => ({\r\n  getNovelInfo(novelInfo) {\r\n    dispatch(actionCreators.getNovelInfo(novelInfo))\r\n  },\r\n  handleInputChange(e) {\r\n    let page_title = e.target.value;\r\n    dispatch(actionCreators.handleInputChange(page_title))\r\n  },\r\n  handleChange(res) {\r\n    if(res.file.status === 'done') {\r\n      let image_url = api + '/uploads/' + res.file.response.image_url\r\n      dispatch(actionCreators.handleChange(image_url))\r\n    }\r\n  },\r\n  handleSubmit(props) {\r\n    dispatch(actionCreators.handleSubmit(props))\r\n  }\r\n});\r\n\r\nexport default connect(mapState, mapDispatch)(withRouter(Modify));"],"sourceRoot":""}