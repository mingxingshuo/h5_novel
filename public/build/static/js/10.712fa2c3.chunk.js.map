{"version":3,"sources":["pages/novel/config/edit/index.js"],"names":["EditRule","_this","this","_this$props","props","book","price","start","end","handlePriceChange","handleStartChange","handleEndChange","handleCreate","handleUpdate","submit","location","pathname","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","antd__WEBPACK_IMPORTED_MODULE_6__","style","marginRight","type","onClick","antd__WEBPACK_IMPORTED_MODULE_7__","labelCol","sm","span","wrapperCol","Item","label","title","antd__WEBPACK_IMPORTED_MODULE_8__","value","placeholder","onChange","textAlign","history","goBack","_this$props2","initUpdateForm","data","decodeURI","search","split","JSON","parse","setBookInfo","id","resetState","PureComponent","connect","state","novel","rule_id","dispatch","actionCreators","e","target","createRules","updateRules","withRouter"],"mappings":"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","file":"static/js/10.712fa2c3.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport { Form, Input, Button } from 'antd';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from \"react-redux\";\r\nimport { actionCreators } from '../../store';\r\n\r\nclass EditRule extends PureComponent {\r\n\r\n  render() {\r\n    const { book, price, start, end, handlePriceChange, handleStartChange, handleEndChange, handleCreate, handleUpdate, location } = this.props;\r\n    const FormLabelCol = {\r\n      labelCol: {\r\n        sm: {span: 3},\r\n      },\r\n      wrapperCol: {\r\n        sm: {span: 8},\r\n      }\r\n    };\r\n    let submit = location.pathname === '/build/novel/config/create' ? <Button style={{marginRight: '20px'}} type='primary' onClick={() => {handleCreate(this.props)}}>创建</Button> : <Button style={{marginRight: '20px'}} type='primary' onClick={() => {handleUpdate(this.props)}}>修改</Button>;\r\n    return (\r\n      <Form {...FormLabelCol}>\r\n        <Form.Item label='小说名称'>\r\n          <h3>{book.title}</h3>\r\n        </Form.Item>\r\n        <Form.Item label='付费金额'>\r\n          <Input value={price} placeholder='请输入付费金额' onChange={handlePriceChange} />\r\n        </Form.Item>\r\n        <Form.Item label='起始章节'>\r\n          <Input value={start} placeholder='请输入起始章节' onChange={handleStartChange} />\r\n        </Form.Item>\r\n        <Form.Item label='结束章节'>\r\n          <Input value={end} placeholder='请输入结束章节' onChange={handleEndChange} />\r\n        </Form.Item>\r\n        <Form.Item style={{textAlign: 'center'}}>\r\n          {submit}\r\n          <Button type='danger' onClick={() => {this.props.history.goBack();}}>取消</Button>\r\n        </Form.Item>\r\n      </Form>\r\n    )\r\n  }\r\n  componentDidMount() {\r\n    const { book, location, initUpdateForm } = this.props;\r\n    if (this.props.location.pathname === '/build/novel/config/update') {\r\n      let data = decodeURI(location.search.split('=')[1]);\r\n      data = JSON.parse(data)\r\n      initUpdateForm(data)\r\n    }\r\n    this.props.setBookInfo(book.id, book.title)\r\n  }\r\n  componentWillUnmount() {\r\n    this.props.resetState()\r\n  }\r\n}\r\n\r\nconst mapState = (state) => ({\r\n  book: state.novel.book,\r\n  price: state.novel.price,\r\n  start: state.novel.start,\r\n  end: state.novel.end,\r\n  rule_id: state.novel.rule_id\r\n});\r\n\r\nconst mapDispatch = (dispatch) => ({\r\n  setBookInfo(id, title) {\r\n    dispatch(actionCreators.setBookInfo(id, title))\r\n  },\r\n  initUpdateForm(data) {\r\n    dispatch(actionCreators.initUpdateForm(data))\r\n  },\r\n  handlePriceChange(e) {\r\n    let price = e.target.value;\r\n    dispatch(actionCreators.handlePriceChange(price))\r\n  },\r\n  handleStartChange(e) {\r\n    let start = e.target.value;\r\n    dispatch(actionCreators.handleStartChange(start))\r\n  },\r\n  handleEndChange(e) {\r\n    let end = e.target.value;\r\n    dispatch(actionCreators.handleEndChange(end))\r\n  },\r\n  handleCreate(props) {\r\n    dispatch(actionCreators.createRules(props))\r\n  },\r\n  handleUpdate(props) {\r\n    dispatch(actionCreators.updateRules(props))\r\n  },\r\n  resetState() {\r\n    dispatch(actionCreators.resetState())\r\n  }\r\n});\r\n\r\nexport default connect(mapState, mapDispatch)(withRouter(EditRule));"],"sourceRoot":""}